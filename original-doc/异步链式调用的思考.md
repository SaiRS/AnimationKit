# 异步链式调用

标签: `异步`， `链式调用`

## 问题来源

* 想要对动画完成后的回调事件进行处理。
* 调用方式想为```object.runAction(action1).doOtherAsyncWork().doOtherSyncWork()```

## 问题方案

### 缓存方案

#### 思路

将所有的操作先缓存下来，然后集中触发，则调用方式需要调整为

```object.runAction(action1).doOtherAsyncWork().doOtherSyncWork().Go()```

最后的```Go```函数是真正让前面的操作执行的方法。

#### 伪代码

```javascript
let _tasks = [];

runAction(action) {
   this._tasks.push({
      taskType: 'runAction',
      params: [action]
   }) 
}

_runAction(action) {
   //... 
}

getNextTask(){
 return this._tasks.shift();
}

Go(){
    
}
```



将操作进行缓存，等执行的时候先执行第一个操作，并监听事件，完成后继续执行下一个操作，直到处理完所有的操作。



